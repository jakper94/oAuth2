{"ast":null,"code":"var _jsxFileName = \"/Users/jakobpersson/Documents/work/school/Teknik-for-sociala-medier/oAuth2/src/components/useDatabase/getFromDatabase.js\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from '../../firebase-config';\nimport TimeStamp from 'react-timestamp';\n\nfunction GetInfoFromUser(uid) {\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    const date = new Date();\n    const unsubscribe = firebase.firestore().collection('users').where('userID', '==', uid).onSnapshot(snapshot => {\n      const newUsers = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setUsers(newUsers);\n    });\n    users.map(user => firebase.firestore().collection('users').doc(user.id).set({\n      timestamp: date.getTime()\n    }));\n    return () => unsubscribe();\n  }, []);\n  return users;\n}\n\nconst GetFromDatabase = ({\n  userUid\n}) => {\n  console.log(userUid);\n  const users = GetInfoFromUser(userUid);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, users.map(user => /*#__PURE__*/React.createElement(\"div\", {\n    key: user.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, user.userID, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, \"Senast inloggad: \", /*#__PURE__*/React.createElement(TimeStamp, {\n    date: user.timestamp,\n    options: {\n      includeDay: true,\n      twentyFourHour: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 35\n    }\n  }), \" \"))));\n};\n\nexport default GetFromDatabase;","map":{"version":3,"sources":["/Users/jakobpersson/Documents/work/school/Teknik-for-sociala-medier/oAuth2/src/components/useDatabase/getFromDatabase.js"],"names":["React","useState","useEffect","firebase","TimeStamp","GetInfoFromUser","uid","users","setUsers","date","Date","unsubscribe","firestore","collection","where","onSnapshot","snapshot","newUsers","docs","map","doc","id","data","user","set","timestamp","getTime","GetFromDatabase","userUid","console","log","userID","includeDay","twentyFourHour"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;;AAGA,SAASC,eAAT,CAAyBC,GAAzB,EAA8B;AAC1B,QAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBP,QAAQ,CAAC,EAAD,CAAjC;AAEAC,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMO,IAAI,GAAG,IAAIC,IAAJ,EAAb;AAEA,UAAMC,WAAW,GAAGR,QAAQ,CAC3BS,SADmB,GAEfC,UAFe,CAEJ,OAFI,EAGfC,KAHe,CAGT,QAHS,EAGC,IAHD,EAGOR,GAHP,EAIfS,UAJe,CAIHC,QAAD,IAAY;AACxB,YAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAmBC,GAAD,KAAS;AACxCC,QAAAA,EAAE,EAAED,GAAG,CAACC,EADgC;AAExC,WAAGD,GAAG,CAACE,IAAJ;AAFqC,OAAT,CAAlB,CAAjB;AAIAd,MAAAA,QAAQ,CAACS,QAAD,CAAR;AACH,KAVmB,CAApB;AAYAV,IAAAA,KAAK,CAACY,GAAN,CAAUI,IAAI,IACVpB,QAAQ,CAACS,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCO,GAAzC,CAA6CG,IAAI,CAACF,EAAlD,EAAsDG,GAAtD,CAA0D;AACtDC,MAAAA,SAAS,EAAEhB,IAAI,CAACiB,OAAL;AAD2C,KAA1D,CADJ;AAOA,WAAO,MAAMf,WAAW,EAAxB;AAGH,GAzBQ,EAyBP,EAzBO,CAAT;AA2BI,SAAOJ,KAAP;AACP;;AAED,MAAMoB,eAAe,GAAE,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAa;AAChCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,QAAMrB,KAAK,GAAGF,eAAe,CAACuB,OAAD,CAA7B;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKrB,KAAK,CAACY,GAAN,CAAUI,IAAI,iBACf;AAAK,IAAA,GAAG,EAAEA,IAAI,CAACF,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKE,IAAI,CAACQ,MADV,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAoB,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAER,IAAI,CAACE,SAAtB;AAAiC,IAAA,OAAO,EAAE;AAAEO,MAAAA,UAAU,EAAE,IAAd;AAAoBC,MAAAA,cAAc,EAAE;AAApC,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAApB,MAFJ,CADC,CADL,CADF;AAWH,CAjBD;;AAkBA,eAAeN,eAAf","sourcesContent":["import React, {useState, useEffect }from 'react'\nimport firebase from '../../firebase-config'\nimport TimeStamp from 'react-timestamp'\n\n\nfunction GetInfoFromUser(uid) {\n    const [users,setUsers] = useState([]);     \n        \n    useEffect(()=>{\n        const date = new Date();\n        \n        const unsubscribe = firebase\n        .firestore()\n            .collection('users')\n            .where('userID', '==', uid)\n            .onSnapshot((snapshot)=>{\n            const newUsers = snapshot.docs.map((doc)=> ({\n                id: doc.id,\n                ...doc.data()\n            }))\n            setUsers(newUsers);\n        })\n\n        users.map(user=>(\n            firebase.firestore().collection('users').doc(user.id).set({\n                timestamp: date.getTime()\n            }\n        ))\n        \n        )\n        return () => unsubscribe()\n        \n        \n    },[])\n    \n        return users;\n}\n\nconst GetFromDatabase =({userUid})=>{\n    console.log(userUid)\n    const users = GetInfoFromUser(userUid);\n    \n        \n    \n    return (\n      <div>\n          {users.map(user=>(\n          <div key={user.id}> \n              {user.userID}\n              <p>Senast inloggad: <TimeStamp date={user.timestamp} options={{ includeDay: true, twentyFourHour: true }}/> </p>\n              \n          </div>  \n          ))}\n      </div>\n    )\n}\nexport default GetFromDatabase"]},"metadata":{},"sourceType":"module"}